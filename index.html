<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2325/2325592.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Reservation Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <style>
        body { touch-action: pan-y; -webkit-user-select: none; font-size: 14px; background-color: #f1f5f9; }
        .board-container { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; padding: 10px; width: 100%; }
        .kanban-column { min-height: 80px; max-height: 500px; overflow-y: auto; border-radius: 4px; padding: 2px; }
        .sortable-ghost { opacity: 0.3; background: #dbeafe !important; }

        .guest-card { 
            cursor: grab; margin-bottom: 6px; border-radius: 8px; 
            padding: 8px 10px !important; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0; background: white; touch-action: none;
        }

        .status-completed, .status-cancelled { display: none; opacity: 0.5; filter: grayscale(1); }
        body.show-finished .status-completed, body.show-finished .status-cancelled { display: block !important; }
        .guest-card.hidden-search { display: none !important; }

        .status-pending { border-left: 6px solid #94a3b8; }
        .status-confirmed { border-left: 6px solid #3b82f6; } 
        .status-seated { border-left: 6px solid #22c55e; }    
        .status-completed { border-left: 6px solid #64748b; } 
        .status-cancelled { border-left: 6px solid #ef4444; } 

        .large-party-alert { border: 2px solid #ef4444 !important; background-color: #fff1f2 !important; }
        .party-badge { animation: pulse 2s infinite; font-size: 9px; font-weight: 800; color: #ef4444; text-transform: uppercase; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }

        .table-box { border: 2px solid #cbd5e1; border-radius: 10px; background: white; padding: 10px; display: flex; flex-direction: column; }
        .table-label { font-size: 12px; font-weight: 900; color: #475569; margin-bottom: 6px; text-transform: uppercase; }
        
        #announcementBox { text-align: center; resize: none; border-radius: 12px; }
        @media print { .no-print { display: none !important; } }
    </style>
</head>
<body class="p-2">

    <div class="no-print">
        <header class="flex justify-between items-center mb-3 bg-white px-5 py-3 rounded-2xl shadow-sm border border-slate-200">
            <div class="flex items-center gap-5">
                <h1 class="font-black italic text-slate-800 text-2xl tracking-tighter uppercase">RESERVATIONS</h1>
                <input type="date" id="datePicker" class="border-2 border-slate-100 p-1.5 rounded-lg font-bold text-blue-600 outline-none">
                <span id="totalCovers" class="text-xs font-black text-slate-500 bg-slate-100 px-4 py-1.5 rounded-full uppercase">0 ACTIVE GUESTS</span>
            </div>
            <div class="flex gap-3">
                <button onclick="downloadBackup()" class="bg-emerald-50 text-emerald-700 px-3 py-1.5 text-[10px] font-black border border-emerald-200 rounded-lg uppercase">Backup</button>
                <button onclick="document.getElementById('fileInput').click()" class="bg-orange-50 text-orange-700 px-3 py-1.5 text-[10px] font-black border border-orange-200 rounded-lg uppercase">Restore</button>
                <input type="file" id="fileInput" class="hidden" onchange="restoreBackup(event)">
                <button onclick="window.print()" class="text-slate-400 px-4 py-1.5 text-xs font-bold border rounded-lg uppercase">Print</button>
                <button onclick="openModal()" class="bg-blue-600 text-white px-6 py-2 rounded-xl font-black text-xs uppercase shadow-lg">+ New Booking</button>
            </div>
        </header>

        <div class="mb-4">
            <textarea id="announcementBox" oninput="saveAnnounce()" placeholder="â€” DAILY NOTES & SPECIALS â€”" 
            class="w-full bg-amber-50 border-2 border-amber-100 p-3 text-sm font-bold text-amber-900 h-16 uppercase outline-none focus:border-amber-300 shadow-inner"></textarea>
        </div>

        <div class="board-container">
            <div class="flex flex-col gap-4">
                <div class="text-[11px] font-black text-blue-600 text-center uppercase tracking-widest bg-blue-100/50 py-1.5 rounded-lg border border-blue-200">Zone A</div>
                <div class="table-box"><div class="table-label">A1</div><div id="A1" class="kanban-column"></div></div>
                <div class="table-box"><div class="table-label">A2</div><div id="A2" class="kanban-column"></div></div>
                <div class="table-box"><div class="table-label">A3</div><div id="A3" class="kanban-column"></div></div>
                <div class="table-box"><div class="table-label">A6</div><div id="A6" class="kanban-column"></div></div>
                <div class="table-box"><div class="table-label">A7</div><div id="A7" class="kanban-column"></div></div>
                <div class="table-box"><div class="table-label">A8</div><div id="A8" class="kanban-column"></div></div>
            </div>

            <div class="flex flex-col bg-slate-200/50 p-4 rounded-2xl border border-slate-300 shadow-inner h-full min-h-[700px]">
                <div class="mb-2">
                    <input type="text" id="searchInput" oninput="searchGuests()" placeholder="ðŸ” SEARCH..." 
                    class="w-full p-3 rounded-xl border-2 border-slate-200 text-sm font-bold uppercase outline-none focus:border-blue-500 shadow-sm">
                </div>
                
                <div class="flex items-center justify-between mb-4">
                    <button onclick="sortArrivals()" class="bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1.5 rounded-lg text-[10px] font-black uppercase border border-blue-200 transition-colors">Sort by Time â†“</button>
                    <label class="flex items-center gap-2 cursor-pointer group">
                        <input type="checkbox" id="showFinishedToggle" onchange="toggleFinished(this)" class="w-4 h-4 accent-slate-600">
                        <span class="text-[10px] font-black text-slate-500 uppercase">Show Finished</span>
                    </label>
                </div>

                <div id="unassigned" class="kanban-column flex-grow"></div>
                <button onclick="clearDay()" class="mt-6 text-[10px] text-slate-400 font-bold uppercase underline hover:text-red-500">Wipe Today</button>
            </div>

            <div class="flex flex-col gap-4">
                <div class="text-[11px] font-black text-emerald-600 text-center uppercase tracking-widest bg-emerald-100/50 py-1.5 rounded-lg border border-emerald-200">Zone B</div>
                <div class="table-box"><div class="table-label">B1</div><div id="B1" class="kanban-column"></div></div>
                <div class="table-box"><div class="table-label">B2</div><div id="B2" class="kanban-column"></div></div>
                <div class="table-box"><div class="table-label">B3A</div><div id="B3A" class="kanban-column"></div></div>
                <div class="table-box"><div class="table-label">B4A</div><div id="B4A" class="kanban-column"></div></div>
                <div class="table-box"><div class="table-label">B5</div><div id="B5" class="kanban-column"></div></div>
            </div>
        </div>
    </div>

    <div id="modal" class="fixed inset-0 bg-slate-900/70 hidden flex items-center justify-center z-50 p-4 backdrop-blur-md">
        <div class="bg-white p-8 rounded-
